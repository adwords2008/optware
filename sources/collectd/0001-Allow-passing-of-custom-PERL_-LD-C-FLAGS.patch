From 09c23a1a4e0afb732a8c31ceec4f3b03c66867e1 Mon Sep 17 00:00:00 2001
From: Sebastian Schmidt <yath@yath.de>
Date: Fri, 8 Jun 2012 19:21:33 +0200
Subject: [PATCH 1/4] Allow passing of custom PERL_{LD,C}FLAGS

---
 configure.in |   10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/configure.in b/configure.in
index 1cfc2fc..dfd980e 100644
--- a/configure.in
+++ b/configure.in
@@ -2945,8 +2945,14 @@ then
   SAVE_CFLAGS="$CFLAGS"
   SAVE_LDFLAGS="$LDFLAGS"
 dnl ARCHFLAGS="" -> disable multi -arch on OSX (see Config_heavy.pl:fetch_string)
-  PERL_CFLAGS=`ARCHFLAGS="" $perl_interpreter -MExtUtils::Embed -e ccopts`
-  PERL_LDFLAGS=`ARCHFLAGS="" $perl_interpreter -MExtUtils::Embed -e ldopts`
+  if test "x$PERL_CFLAGS" = "x"
+  then
+    PERL_CFLAGS=`ARCHFLAGS="" $perl_interpreter -MExtUtils::Embed -e ccopts`
+  fi
+  if test "x$PERL_CFLAGS" = "x"
+  then
+    PERL_LDFLAGS=`ARCHFLAGS="" $perl_interpreter -MExtUtils::Embed -e ldopts`
+  fi
   CFLAGS="$CFLAGS $PERL_CFLAGS"
   LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
-- 
1.7.10

